---
layout: post
title: 第四节：计算机视觉--特征描述符与图像匹配
categories: [Computer_Vision]
---

* content
{:toc}

## 特征描述符

当我们进行完角点检测后，我们就可以在不同的图片中寻找相同的特征了。

但是不同的图像会存在平移，旋转，光照等种种情况，我们必须保证，这些检测的特征在不同的图像上是不变的，只有这样，在能得到在不同的图像上进行相同特征的检测。而harris角点虽然具有一定的不变性，但是这种不变性对于特征的匹配的作用不大。

所以，我们可以为每一个特征设计一个描述符，这个描述符有两个作用

1. 不变性： 即使图像被变换，描述符也不应该改变
2. 区分力： 每一个点的描述符应该是高度唯一的

#### 简单的特征描述符

假设我们将以特征为中心的5×5的窗口的所有像素保存下载，这样就可以将这个5×5的窗口当作一个特征描述符(只有平移不变形)

因为对于不同的特征，他周围的像素只有极小的可能是相同的，所以，我们完全在两个图像中通过这个5×5的窗口来匹配，如果，这个5×5的窗口是相同的，则意味着，这是一个相同的特征

但是显而易见，这个简单的特征描述符仅具有平移不变形。

#### MOFS特征描述符

Brown发表的一篇论文Multi-Image Matching using Multi-Scale Oriented Patches有提到一种特征描述符

这种描述符对于旋转和投影有尺度不变性。

MOFS特征描述符将特征点周围40×40像素区域子采样得到一个8×8的定向图像块。

我们根据特征点的梯度方向，**将图片旋转至特征点的梯度方向水平**，保证旋转不变性，

之后，我们进行子采样得到一个8×8的矩阵。

![2019-11-09-15-55-48.png](2019-11-09-15-55-48.png)

之后我们将这个8×8的图像规范化为一个零均值和单位方差。这将保持仿射不变性

具体实现参照[homework_cv_exp2](https://gitee.com/smithgua/homework/blob/master/homework_cv/e2/features.py中MOPS的实现


## 图像匹配

当我们得到两个图像的特征描述符，我们就需要确定两个图像中所提取角点是否一致，我们就需要提供一个有效的算法来判断两者是否一致

### SSD匹配

我们将所有特征描述符两两计算欧式距离平方。我们选取其中相差最小的结果，认为他们是匹配的。

也就是说，我们为了判断一个特征点是否在另一个图片中存在，我们就将这个图片中的特征描述符和另一个图片的所有特征描述符进行计算欧式距离平方，选取其中最小的一个，则认为他与这个特征描述符是同一个角点。

最后计算所有的特征描述符后，进行阈值检测，如果某两个特征描述符的欧式距离平方过大，我们就将其抛弃。

### 比率匹配

比率匹配的介绍通过在MOPS论文中出现，

在SSD匹配时，我们只选取了最小的那个。而在比率匹配中，我们选取了最好的和次好的两个特征，然后求比值。如果比值在某个阈值之内，则保留。

也可以参见[homework_cv_exp2](https://gitee.com/smithgua/homework/blob/master/homework_cv/e2/features.py中SSD和Ratio的实现，没有进行阈值处理。

## 总结

除了上述的样例，还有许多其他更为高效的特征描述符，这将在后面学习算法的时候统一记录。